<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Test Timer</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      padding: 2rem;
      background: #1a1a2e;
      color: white;
    }
    .timer-display {
      font-size: 4rem;
      font-weight: bold;
      margin: 2rem 0;
      color: #ffd700;
    }
    button {
      font-size: 1.5rem;
      padding: 1rem 2rem;
      margin: 0.5rem;
      cursor: pointer;
    }
    #logs {
      margin-top: 2rem;
      padding: 1rem;
      background: #000;
      border: 1px solid #333;
      font-family: monospace;
      font-size: 0.9rem;
      max-height: 400px;
      overflow-y: auto;
    }
    .log-item {
      margin: 0.25rem 0;
      padding: 0.25rem;
      border-bottom: 1px solid #222;
    }
  </style>
</head>
<body>
  <h1>üß™ Test del Timer</h1>
  
  <div class="timer-display" id="display">02:00</div>
  
  <div>
    <button id="startBtn">‚ñ∂ Iniciar</button>
    <button id="pauseBtn">‚è∏ Pausar</button>
    <button id="resetBtn">‚Ü∫ Reset</button>
  </div>
  
  <div id="status">Estado: IDLE</div>
  
  <div id="logs">
    <strong>Console Logs:</strong>
  </div>

  <script>
    // Interceptar console.log
    const logsDiv = document.getElementById('logs');
    const originalLog = console.log;
    console.log = function(...args) {
      originalLog.apply(console, args);
      const logItem = document.createElement('div');
      logItem.className = 'log-item';
      logItem.textContent = args.join(' ');
      logsDiv.appendChild(logItem);
      logsDiv.scrollTop = logsDiv.scrollHeight;
    };

    // Variables del timer
    let timeRemaining = 120;
    let intervalId = null;
    let isActive = false;
    
    const display = document.getElementById('display');
    const status = document.getElementById('status');
    
    function formatTime(seconds) {
      const mins = Math.floor(seconds / 60);
      const secs = seconds % 60;
      return `${mins.toString().padStart(2, '0')}:${secs.toString().padStart(2, '0')}`;
    }
    
    function updateDisplay() {
      display.textContent = formatTime(timeRemaining);
      console.log('[Timer] Display actualizado:', formatTime(timeRemaining));
    }
    
    function tick() {
      console.log('[Timer] Tick - timeRemaining:', timeRemaining);
      timeRemaining--;
      updateDisplay();
      
      if (timeRemaining <= 0) {
        stop();
        console.log('[Timer] Tiempo terminado!');
      }
    }
    
    function start() {
      console.log('[Timer] Iniciando timer...');
      if (isActive) {
        console.log('[Timer] Ya est√° activo!');
        return;
      }
      
      isActive = true;
      status.textContent = 'Estado: ACTIVO';
      intervalId = setInterval(tick, 1000);
      console.log('[Timer] Interval ID:', intervalId);
    }
    
    function pause() {
      console.log('[Timer] Pausando timer...');
      if (!isActive) {
        console.log('[Timer] No est√° activo!');
        return;
      }
      
      isActive = false;
      status.textContent = 'Estado: PAUSADO';
      clearInterval(intervalId);
      console.log('[Timer] Interval detenido');
    }
    
    function stop() {
      console.log('[Timer] Deteniendo timer...');
      isActive = false;
      status.textContent = 'Estado: DETENIDO';
      clearInterval(intervalId);
    }
    
    function reset() {
      console.log('[Timer] Reseteando timer...');
      stop();
      timeRemaining = 120;
      updateDisplay();
      status.textContent = 'Estado: IDLE';
    }
    
    // Event listeners
    document.getElementById('startBtn').addEventListener('click', () => {
      console.log('[UI] Bot√≥n Iniciar clickeado');
      start();
    });
    
    document.getElementById('pauseBtn').addEventListener('click', () => {
      console.log('[UI] Bot√≥n Pausar clickeado');
      pause();
    });
    
    document.getElementById('resetBtn').addEventListener('click', () => {
      console.log('[UI] Bot√≥n Reset clickeado');
      reset();
    });
    
    console.log('[Timer] Sistema de prueba iniciado');
    console.log('[Timer] timeRemaining inicial:', timeRemaining);
  </script>
</body>
</html>
